<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZeroMate: zero_mate::CBus Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ZeroMate
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">Raspberry Pi Zero Emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classzero__mate_1_1CBus.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classzero__mate_1_1CBus-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">zero_mate::CBus Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>An interface the CPU uses to communicate with different peripherals.  
 <a href="classzero__mate_1_1CBus.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="bus_8hpp_source.html">bus.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzero__mate_1_1CBus_1_1TMapped__Peripheral.html">TMapped_Peripheral</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Representation of a memory-mapped peripheral.  <a href="structzero__mate_1_1CBus_1_1TMapped__Peripheral.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a92a635080cf15efc7048a64b67b8785b"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a92a635080cf15efc7048a64b67b8785b">NStatus</a> { <a class="el" href="classzero__mate_1_1CBus.html#a92a635080cf15efc7048a64b67b8785bae0aa021e21dddbd6d8cecec71e9cf564">OK</a>
, <a class="el" href="classzero__mate_1_1CBus.html#a92a635080cf15efc7048a64b67b8785ba52c00429932e89ab0f17c76575ecc130">Addr_Collision</a>
, <a class="el" href="classzero__mate_1_1CBus.html#a92a635080cf15efc7048a64b67b8785ba06cf0fc4769b0d1b42db321012d33e06">Out_Of_Addr_Space</a>
 }</td></tr>
<tr class="memdesc:a92a635080cf15efc7048a64b67b8785b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return code (status) of mapping a peripheral to the address space.  <a href="classzero__mate_1_1CBus.html#a92a635080cf15efc7048a64b67b8785b">More...</a><br /></td></tr>
<tr class="separator:a92a635080cf15efc7048a64b67b8785b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d35256fc0205e260516148a1780d0dc"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a6d35256fc0205e260516148a1780d0dc">Peripheral_t</a> = std::shared_ptr&lt; <a class="el" href="classzero__mate_1_1peripheral_1_1IPeripheral.html">peripheral::IPeripheral</a> &gt;</td></tr>
<tr class="memdesc:a6d35256fc0205e260516148a1780d0dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is just a simplification to make the code less wordy.  <a href="classzero__mate_1_1CBus.html#a6d35256fc0205e260516148a1780d0dc">More...</a><br /></td></tr>
<tr class="separator:a6d35256fc0205e260516148a1780d0dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5928650c76e0e10ffdd30561dd585e1a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a5928650c76e0e10ffdd30561dd585e1a">CBus</a> ()</td></tr>
<tr class="memdesc:a5928650c76e0e10ffdd30561dd585e1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an instance of the class.  <a href="classzero__mate_1_1CBus.html#a5928650c76e0e10ffdd30561dd585e1a">More...</a><br /></td></tr>
<tr class="separator:a5928650c76e0e10ffdd30561dd585e1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba2235a12cebc9a603c57a4840a4decb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#aba2235a12cebc9a603c57a4840a4decb">Set_CP15</a> (std::shared_ptr&lt; <a class="el" href="classzero__mate_1_1coprocessor_1_1CCP15.html">coprocessor::CCP15</a> &gt; cp15)</td></tr>
<tr class="memdesc:aba2235a12cebc9a603c57a4840a4decb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a reference to CP15 (coprocessor 15).  <a href="classzero__mate_1_1CBus.html#aba2235a12cebc9a603c57a4840a4decb">More...</a><br /></td></tr>
<tr class="separator:aba2235a12cebc9a603c57a4840a4decb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa526b7afc98f66dbb672fe8d4f3ae88a"><td class="memTemplParams" colspan="2">template&lt;typename Type &gt; </td></tr>
<tr class="memitem:aa526b7afc98f66dbb672fe8d4f3ae88a"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#aa526b7afc98f66dbb672fe8d4f3ae88a">Write</a> (std::uint32_t addr, Type value)</td></tr>
<tr class="memdesc:aa526b7afc98f66dbb672fe8d4f3ae88a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to the given address in the address space.  <a href="classzero__mate_1_1CBus.html#aa526b7afc98f66dbb672fe8d4f3ae88a">More...</a><br /></td></tr>
<tr class="separator:aa526b7afc98f66dbb672fe8d4f3ae88a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bcd53677c24f62d7cce5e95636e776a"><td class="memTemplParams" colspan="2">template&lt;typename Type &gt; </td></tr>
<tr class="memitem:a1bcd53677c24f62d7cce5e95636e776a"><td class="memTemplItemLeft" align="right" valign="top">Type&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a1bcd53677c24f62d7cce5e95636e776a">Read</a> (std::uint32_t addr)</td></tr>
<tr class="memdesc:a1bcd53677c24f62d7cce5e95636e776a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads data from the given address in the address space.  <a href="classzero__mate_1_1CBus.html#a1bcd53677c24f62d7cce5e95636e776a">More...</a><br /></td></tr>
<tr class="separator:a1bcd53677c24f62d7cce5e95636e776a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73e2222c5c3a5474f46a9011a50c1c7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classzero__mate_1_1CBus.html#a92a635080cf15efc7048a64b67b8785b">NStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a73e2222c5c3a5474f46a9011a50c1c7f">Attach_Peripheral</a> (std::uint32_t addr, const <a class="el" href="classzero__mate_1_1CBus.html#a6d35256fc0205e260516148a1780d0dc">Peripheral_t</a> &amp;peripheral)</td></tr>
<tr class="memdesc:a73e2222c5c3a5474f46a9011a50c1c7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches a peripheral to the bus.  <a href="classzero__mate_1_1CBus.html#a73e2222c5c3a5474f46a9011a50c1c7f">More...</a><br /></td></tr>
<tr class="separator:a73e2222c5c3a5474f46a9011a50c1c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a5b389ea9950ca078a7d07c5425f60f12"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a5b389ea9950ca078a7d07c5425f60f12">Peripherals_t</a> = std::set&lt; <a class="el" href="structzero__mate_1_1CBus_1_1TMapped__Peripheral.html">TMapped_Peripheral</a> &gt;</td></tr>
<tr class="memdesc:a5b389ea9950ca078a7d07c5425f60f12"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is just a simplification to make the code less wordy.  <a href="classzero__mate_1_1CBus.html#a5b389ea9950ca078a7d07c5425f60f12">More...</a><br /></td></tr>
<tr class="separator:a5b389ea9950ca078a7d07c5425f60f12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a3822e274a11c99cfc0584b5755af65f5"><td class="memTemplParams" colspan="2">template&lt;typename Type &gt; </td></tr>
<tr class="memitem:a3822e274a11c99cfc0584b5755af65f5"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a3822e274a11c99cfc0584b5755af65f5">Unaligned_Access_Violation</a> (std::uint32_t addr) const</td></tr>
<tr class="memdesc:a3822e274a11c99cfc0584b5755af65f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for unaligned memory access.  <a href="classzero__mate_1_1CBus.html#a3822e274a11c99cfc0584b5755af65f5">More...</a><br /></td></tr>
<tr class="separator:a3822e274a11c99cfc0584b5755af65f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a016eb46a0e573ea1e37e5c51643ca69f"><td class="memTemplParams" colspan="2">template&lt;typename Type &gt; </td></tr>
<tr class="memitem:a016eb46a0e573ea1e37e5c51643ca69f"><td class="memTemplItemLeft" align="right" valign="top">Peripherals_t::iterator&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a016eb46a0e573ea1e37e5c51643ca69f">Get_Peripheral</a> (std::uint32_t addr) const</td></tr>
<tr class="memdesc:a016eb46a0e573ea1e37e5c51643ca69f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the corresponding peripheral based on the given address.  <a href="classzero__mate_1_1CBus.html#a016eb46a0e573ea1e37e5c51643ca69f">More...</a><br /></td></tr>
<tr class="separator:a016eb46a0e573ea1e37e5c51643ca69f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6331d83a0dcf19b139ff42a6f2693787"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a6331d83a0dcf19b139ff42a6f2693787">Is_Peripheral_Accessible</a> (std::uint32_t addr, const Peripherals_t::iterator &amp;peripheral_iter) const</td></tr>
<tr class="memdesc:a6331d83a0dcf19b139ff42a6f2693787"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a peripheral was found and is accessible.  <a href="classzero__mate_1_1CBus.html#a6331d83a0dcf19b139ff42a6f2693787">More...</a><br /></td></tr>
<tr class="separator:a6331d83a0dcf19b139ff42a6f2693787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8ddfa19054d7573bbc4aa05f93080c8"><td class="memItemLeft" align="right" valign="top">Peripherals_t::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#ab8ddfa19054d7573bbc4aa05f93080c8">Get_Peripheral</a> (std::uint32_t addr) const</td></tr>
<tr class="memdesc:ab8ddfa19054d7573bbc4aa05f93080c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binary searches for a peripheral by the given address.  <a href="classzero__mate_1_1CBus.html#ab8ddfa19054d7573bbc4aa05f93080c8">More...</a><br /></td></tr>
<tr class="separator:ab8ddfa19054d7573bbc4aa05f93080c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a22ede877d597bbd5a275fddef2e25e71"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classzero__mate_1_1CBus.html#a5b389ea9950ca078a7d07c5425f60f12">Peripherals_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a22ede877d597bbd5a275fddef2e25e71">m_peripherals</a></td></tr>
<tr class="memdesc:a22ede877d597bbd5a275fddef2e25e71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collection of all memory-mapped peripherals.  <a href="classzero__mate_1_1CBus.html#a22ede877d597bbd5a275fddef2e25e71">More...</a><br /></td></tr>
<tr class="separator:a22ede877d597bbd5a275fddef2e25e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a962dea38bc516d4d9e5e8f974b164e53"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a962dea38bc516d4d9e5e8f974b164e53">m_mtx</a></td></tr>
<tr class="memdesc:a962dea38bc516d4d9e5e8f974b164e53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex to make memory accesses thread-safe.  <a href="classzero__mate_1_1CBus.html#a962dea38bc516d4d9e5e8f974b164e53">More...</a><br /></td></tr>
<tr class="separator:a962dea38bc516d4d9e5e8f974b164e53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed0a009853798e6e73c3f9e3c976ac9"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classzero__mate_1_1coprocessor_1_1CCP15.html">coprocessor::CCP15</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzero__mate_1_1CBus.html#a5ed0a009853798e6e73c3f9e3c976ac9">m_cp15</a></td></tr>
<tr class="memdesc:a5ed0a009853798e6e73c3f9e3c976ac9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to CP15 (coprocessor 15)  <a href="classzero__mate_1_1CBus.html#a5ed0a009853798e6e73c3f9e3c976ac9">More...</a><br /></td></tr>
<tr class="separator:a5ed0a009853798e6e73c3f9e3c976ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An interface the CPU uses to communicate with different peripherals. </p>
<p>It holds a list of all peripherals that have been mapped to the address space. When the CPU wants to talk to a peripheral, it must know the address the peripheral is mapped to. The <a class="el" href="classzero__mate_1_1CBus.html" title="An interface the CPU uses to communicate with different peripherals.">CBus</a> class then forwards the data to the corresponding peripheral based on this address. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a6d35256fc0205e260516148a1780d0dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d35256fc0205e260516148a1780d0dc">&#9670;&nbsp;</a></span>Peripheral_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classzero__mate_1_1CBus.html#a6d35256fc0205e260516148a1780d0dc">zero_mate::CBus::Peripheral_t</a> =  std::shared_ptr&lt;<a class="el" href="classzero__mate_1_1peripheral_1_1IPeripheral.html">peripheral::IPeripheral</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is just a simplification to make the code less wordy. </p>

</div>
</div>
<a id="a5b389ea9950ca078a7d07c5425f60f12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b389ea9950ca078a7d07c5425f60f12">&#9670;&nbsp;</a></span>Peripherals_t</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classzero__mate_1_1CBus.html#a5b389ea9950ca078a7d07c5425f60f12">zero_mate::CBus::Peripherals_t</a> =  std::set&lt;<a class="el" href="structzero__mate_1_1CBus_1_1TMapped__Peripheral.html">TMapped_Peripheral</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is just a simplification to make the code less wordy. </p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a92a635080cf15efc7048a64b67b8785b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92a635080cf15efc7048a64b67b8785b">&#9670;&nbsp;</a></span>NStatus</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classzero__mate_1_1CBus.html#a92a635080cf15efc7048a64b67b8785b">zero_mate::CBus::NStatus</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return code (status) of mapping a peripheral to the address space. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a92a635080cf15efc7048a64b67b8785bae0aa021e21dddbd6d8cecec71e9cf564"></a>OK&#160;</td><td class="fielddoc"><p>The peripherals has been mapped successfully. </p>
</td></tr>
<tr><td class="fieldname"><a id="a92a635080cf15efc7048a64b67b8785ba52c00429932e89ab0f17c76575ecc130"></a>Addr_Collision&#160;</td><td class="fielddoc"><p>Another peripheral is already mapped to this region. </p>
</td></tr>
<tr><td class="fieldname"><a id="a92a635080cf15efc7048a64b67b8785ba06cf0fc4769b0d1b42db321012d33e06"></a>Out_Of_Addr_Space&#160;</td><td class="fielddoc"><p>The peripheral does not fit into the address space. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5928650c76e0e10ffdd30561dd585e1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5928650c76e0e10ffdd30561dd585e1a">&#9670;&nbsp;</a></span>CBus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">zero_mate::CBus::CBus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates an instance of the class. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a73e2222c5c3a5474f46a9011a50c1c7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73e2222c5c3a5474f46a9011a50c1c7f">&#9670;&nbsp;</a></span>Attach_Peripheral()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classzero__mate_1_1CBus.html#a92a635080cf15efc7048a64b67b8785b">CBus::NStatus</a> zero_mate::CBus::Attach_Peripheral </td>
          <td>(</td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classzero__mate_1_1CBus.html#a6d35256fc0205e260516148a1780d0dc">Peripheral_t</a> &amp;&#160;</td>
          <td class="paramname"><em>peripheral</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attaches a peripheral to the bus. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Address the peripheral should be mapped to </td></tr>
    <tr><td class="paramname">peripheral</td><td>The peripheral itself </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NStatus code indication whether the peripheral has been mapped successfully or not </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classzero__mate_1_1CBus_a73e2222c5c3a5474f46a9011a50c1c7f_cgraph.svg" width="623" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a016eb46a0e573ea1e37e5c51643ca69f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a016eb46a0e573ea1e37e5c51643ca69f">&#9670;&nbsp;</a></span>Get_Peripheral() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Type &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Peripherals_t::iterator zero_mate::CBus::Get_Peripheral </td>
          <td>(</td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the corresponding peripheral based on the given address. </p>
<p>It searches for a peripheral mapped to the region determined by the given address. It also checks memory access alignment, if enabled in CP15.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Type</td><td>Data type used when writing or reading from the address space </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Relative address to be read from or written to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Corresponding peripheral mapped to the region determined by the given address </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CData_Abort</td><td>if unaligned memory access is detected or no peripheral was mapped into the given region </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classzero__mate_1_1CBus_a016eb46a0e573ea1e37e5c51643ca69f_cgraph.svg" width="392" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classzero__mate_1_1CBus_a016eb46a0e573ea1e37e5c51643ca69f_icgraph.svg" width="404" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab8ddfa19054d7573bbc4aa05f93080c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8ddfa19054d7573bbc4aa05f93080c8">&#9670;&nbsp;</a></span>Get_Peripheral() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Peripherals_t::iterator zero_mate::CBus::Get_Peripheral </td>
          <td>(</td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Binary searches for a peripheral by the given address. </p>
<p>Since peripheral cannot overlap, a binary search can be used to find a peripheral by the given address.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Address in the address space </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Peripheral that should be mapped to the given address </dd></dl>

</div>
</div>
<a id="a6331d83a0dcf19b139ff42a6f2693787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6331d83a0dcf19b139ff42a6f2693787">&#9670;&nbsp;</a></span>Is_Peripheral_Accessible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool zero_mate::CBus::Is_Peripheral_Accessible </td>
          <td>(</td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Peripherals_t::iterator &amp;&#160;</td>
          <td class="paramname"><em>peripheral_iter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if a peripheral was found and is accessible. </p>
<p>It checks whether there is a peripheral mapped to the given region in the address space. If a peripheral was found, it also checks if the given address exceeds the size of the peripheral or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Relative address used to access the peripheral </td></tr>
    <tr><td class="paramname">peripheral_iter</td><td>Peripheral iterator from a previously applied binary search </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if an accessible peripheral was found in the given region. false otherwise. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classzero__mate_1_1CBus_a6331d83a0dcf19b139ff42a6f2693787_icgraph.svg" width="623" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a1bcd53677c24f62d7cce5e95636e776a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bcd53677c24f62d7cce5e95636e776a">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Type &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Type zero_mate::CBus::Read </td>
          <td>(</td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads data from the given address in the address space. </p>
<dl class="section note"><dt>Note</dt><dd>The bus width is usually a fixed size. The generic type is supported only for emulation purposes </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Type</td><td>Data type used when calling the function (determines the number of bytes to be read) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Address the data will be read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data read from the given address </dd></dl>

</div>
</div>
<a id="aba2235a12cebc9a603c57a4840a4decb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba2235a12cebc9a603c57a4840a4decb">&#9670;&nbsp;</a></span>Set_CP15()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zero_mate::CBus::Set_CP15 </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classzero__mate_1_1coprocessor_1_1CCP15.html">coprocessor::CCP15</a> &gt;&#160;</td>
          <td class="paramname"><em>cp15</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a reference to CP15 (coprocessor 15). </p>
<p>The bus needs to have access to this coprocessor to determine whether it should check for unaligned memory accesses or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cp15</td><td>Instance of CP15 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3822e274a11c99cfc0584b5755af65f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3822e274a11c99cfc0584b5755af65f5">&#9670;&nbsp;</a></span>Unaligned_Access_Violation()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Type &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool zero_mate::CBus::Unaligned_Access_Violation </td>
          <td>(</td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks for unaligned memory access. </p>
<p>If the coprocessor 15 is not present, the function will ignore any unaligned memory access. If CP15 is present, it will check if unaligned access has been permitted and validates the access accordingly.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Type</td><td>Data type used in the memory access </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Address to be read from or written to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true, if unaligned access takes place. false, otherwise. </dd></dl>

</div>
</div>
<a id="aa526b7afc98f66dbb672fe8d4f3ae88a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa526b7afc98f66dbb672fe8d4f3ae88a">&#9670;&nbsp;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Type &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void zero_mate::CBus::Write </td>
          <td>(</td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Type&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes data to the given address in the address space. </p>
<dl class="section note"><dt>Note</dt><dd>The bus width is usually a fixed size. The generic type is supported only for emulation purposes </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Type</td><td>Data type used when calling the function (determines the number of bytes to be written) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Address the data will be written to </td></tr>
    <tr><td class="paramname">value</td><td>The data itself </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5ed0a009853798e6e73c3f9e3c976ac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ed0a009853798e6e73c3f9e3c976ac9">&#9670;&nbsp;</a></span>m_cp15</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classzero__mate_1_1coprocessor_1_1CCP15.html">coprocessor::CCP15</a>&gt; zero_mate::CBus::m_cp15</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to CP15 (coprocessor 15) </p>

</div>
</div>
<a id="a962dea38bc516d4d9e5e8f974b164e53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a962dea38bc516d4d9e5e8f974b164e53">&#9670;&nbsp;</a></span>m_mtx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex zero_mate::CBus::m_mtx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex to make memory accesses thread-safe. </p>

</div>
</div>
<a id="a22ede877d597bbd5a275fddef2e25e71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22ede877d597bbd5a275fddef2e25e71">&#9670;&nbsp;</a></span>m_peripherals</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classzero__mate_1_1CBus.html#a5b389ea9950ca078a7d07c5425f60f12">Peripherals_t</a> zero_mate::CBus::m_peripherals</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Collection of all memory-mapped peripherals. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/core/<a class="el" href="bus_8hpp_source.html">bus.hpp</a></li>
<li>src/core/<a class="el" href="bus_8cpp.html">bus.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacezero__mate.html">zero_mate</a></li><li class="navelem"><a class="el" href="classzero__mate_1_1CBus.html">CBus</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
